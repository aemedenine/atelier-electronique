<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Atelier Electronique MÃ©denine</title>
<meta name="google-adsense-account" content="ca-pub-5360225987687639">
<!-- Script AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5360225987687639" crossorigin="anonymous"></script>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css" />

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
 // Firebase configuration
 const firebaseConfig = {
  apiKey: "AIzaSyCtbEWdm7CAC25ROslGlVeLOvfxdi2exVo",
  authDomain: "atelier-electronique-mednine.firebaseapp.com",
  projectId: "atelier-electronique-mednine",
  storageBucket: "atelier-electronique-mednine.firebasestorage.app",
  messagingSenderId: "547430908384",
  appId: "1:547430908384:web:4caa4cf3869491bd14eb85"
};

// Initialize Firebase safely
const app = !firebase.apps.length ? firebase.initializeApp(firebaseConfig) : firebase.app();
const analytics = firebase.analytics(app);
const auth = firebase.auth();

// ======= Ø­ÙØ¸ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø­ØªÙ‰ Ø¨Ø¹Ø¯ refresh =======
firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL)
  .then(() => { console.log("ğŸ”’ Session persistente activÃ©e"); })
  .catch(error => { console.error("Erreur persistence:", error); });

// Firebase Sign-In Logic
document.addEventListener('DOMContentLoaded', () => {

  // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
  firebase.auth().onAuthStateChanged((user) => {
    const loginPopup = document.getElementById('login-popup');
    const userInfo = document.getElementById('user-info');
    const userName = document.getElementById('user-name');

    if (user) {
      userInfo.style.display = 'block';
      loginPopup.style.display = 'none';
      userName.textContent = user.displayName || "Ù…Ø³ØªØ®Ø¯Ù…";
    } else {
      userInfo.style.display = 'none';
      loginPopup.style.display = 'flex';
    }
  });

  const loginPopup = document.getElementById('login-popup');
  const btnGoogle = document.getElementById('btn-google');
  const btnClosePopup = document.getElementById('btn-close-popup');
  const userInfo = document.getElementById('user-info');
  const userName = document.getElementById('user-name');
  const btnSignOut = document.getElementById('btn-signout');

  btnGoogle.addEventListener('click', () => {
    const provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider)
      .then(result => {
        const user = result.user;
        userName.textContent = user.displayName;
        userInfo.style.display = 'block';
        loginPopup.style.display = 'none';
      }).catch(console.error);
  });

  btnClosePopup.addEventListener('click', () => loginPopup.style.display='none');

  btnSignOut.addEventListener('click', () => {
    auth.signOut().then(() => {
      userInfo.style.display='none';
      alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­');
    });
  });

  // ======= Video play safety =======
  document.querySelectorAll('.video-card video').forEach(video => {
    video.addEventListener('mouseenter', () => { video.play().catch(()=>{}); });
    video.addEventListener('mouseleave', () => { video.pause(); video.currentTime=0; });
  });

});
</script>

<style>
/* ======= Glow Ù…ØªØ­Ø±Ùƒ Ù„Ù„Ø£Ø²Ø±Ø§Ø± ======= */
.cta-buttons a,
.cta-buttons button {
  transition: box-shadow 0.3s ease, transform 0.2s ease;
}
.cta-buttons a:hover,
.cta-buttons button:hover {
  box-shadow: 0 0 15px #ff6b35, 0 0 30px #ff6b35;
  transform: translateY(-3px);
}

/* Ù†Øµ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠØªØºÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ */
.header-inner h1 {
  display: inline-block;
  font-size: 1.8rem;
  margin-left: 15px;
  transition: color 0.5s, transform 0.5s, text-shadow 0.5s;
}

/* ======= Weather Box ======= */
.weather-box {
  margin: 40px auto 10px;
  padding: 20px;
  max-width: 420px;
  background: rgba(255,255,255,0.08);
  backdrop-filter: blur(8px);
  border-radius: 15px;
  text-align: center;
  color: #fff;
  box-shadow: 0 0 20px rgba(0,255,255,0.2);
}
.weather-box h3 {
  margin-bottom: 10px;
  color: #0ff;
}
.weather-temp {
  font-size: 2.5rem;
  font-weight: bold;
  margin: 10px 0;
}
.weather-desc {
  font-size: 1.1rem;
  opacity: 0.9;
}

/* ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù†Ø¬ÙˆÙ… */
.rating-container { margin: 40px auto; text-align: center; color: #fff; }
.stars-horizontal span { font-size: 2.5rem; cursor: pointer; color: #ccc; transition: color 0.3s, transform 0.3s, text-shadow 0.3s; margin: 0 5px; display: inline-block; }
.stars-horizontal span.selected { color: gold; text-shadow: 0 0 8px gold; }
.stars-horizontal span.hover { color: gold; text-shadow: 0 0 8px gold; transform: scale(1.4) translateY(-5px); }
#rating-value { margin-top: 10px; font-size: 1.2rem; transition: color 0.3s, text-shadow 0.3s, transform 0.3s; }
.rating-container:hover #rating-value { transform: translateY(-3px); }

/* PCB Animated Header */
.header-inner { position: relative; overflow: hidden; }
#pcbCanvasHeader { position: absolute; top:0; left:0; width:100%; height:100%; z-index:0; }
.header-inner img, .header-inner h1 { position: relative; z-index: 10; }

/* Ù†Øµ Ø§Ù„Ø®Ø¨Ø±Ø© Ø¨Ø¯ÙˆÙ† Ù…Ø³ØªØ·ÙŠÙ„ */
.experience-badge {
  display: block;
  text-align: center;
  font-size: 1.3rem;
  font-weight: bold;
  color: yellow;
  margin: 30px auto;
  background: none;
  padding: 0;
  animation: glowExperience 1.5s infinite alternate, floatExperience 3s ease-in-out infinite;
}
@keyframes glowExperience {
  0% { color: yellow; text-shadow: 0 0 5px yellow; }
  25% { color: red; text-shadow: 0 0 8px red; }
  50% { color: cyan; text-shadow: 0 0 10px cyan; }
  75% { color: magenta; text-shadow: 0 0 12px magenta; }
  100% { color: yellow; text-shadow: 0 0 15px yellow; }
}
@keyframes floatExperience { 0% { transform: translateY(0); } 50% { transform: translateY(-6px); } 100% { transform: translateY(0); } }

/* ======= Cookie / CMP Banner ======= */
#cmp-banner {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: rgba(0,0,0,0.85);
  color: #fff;
  text-align: center;
  padding: 15px 10px;
  z-index: 9999;
  font-size: 0.95rem;
}
#cmp-banner button {
  background:#ff6b35;
  border:none;
  color:#fff;
  padding:8px 15px;
  margin-left:10px;
  cursor:pointer;
  border-radius:5px;
  font-weight:bold;
}

/* ======= Gallery / Services Today ======= */
.services-today h2 {
  text-align:center;
  color:#0ff;
  margin:30px 0;
  font-size:1.8rem;
  text-shadow:0 0 8px rgba(0,255,255,0.6);
}
.services-slider {
  display:flex;
  gap:20px;
  overflow-x:auto;
  padding:10px;
  cursor:grab;
}
.services-slider::-webkit-scrollbar { display:none; }
.service-card {
  min-width:220px;
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(6px);
  border-radius:15px;
  padding:10px;
  box-shadow:0 8px 20px rgba(0,0,0,.35);
  flex-shrink:0;
}
.service-card img {
  width:100%;
  height:140px;
  object-fit:cover;
  border-radius:12px;
}
.service-card p {
  margin-top:10px;
  font-weight:bold;
  color:#fff;
  text-align:center;
}
.site-signature {
  text-align: center;
  color: #aaa;
  font-size: 0.9rem;
  margin-top: 10px;
  padding-bottom: 10px;
  font-style: italic;
}
/* Login Popup */
#login-popup {
  display: none;
  position: fixed;
  top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.7);
  justify-content: center; align-items: center;
  z-index:10000;
  display:flex; flex-direction:column;
}
#login-popup .popup-content {
  background:#111; padding:25px; border-radius:12px;
  text-align:center; color:#fff; width:300px; max-width:90%;
  box-shadow:0 0 20px #0ff;
  animation: fadeIn 0.5s ease;
}
#login-popup .popup-content button {
  background:#0ff; color:#000; padding:10px 20px;
  border:none; border-radius:5px; cursor:pointer; margin:10px 0;
  transition: all 0.3s ease;
}
#login-popup .popup-content button:hover {
  background:#0aa; transform: scale(1.05);
}

@keyframes fadeIn { from{opacity:0} to{opacity:1} }
/* VIDEO CARDS */
.video-card video {
  width: 100%;
  height: 160px;
  object-fit: cover;
  border-radius: 12px;
  transition: transform 0.3s ease;
}

.video-card video:hover {
  transform: scale(1.05);
}</style>
</head>
<body>
<header>
  <div class="container header-inner">
    <canvas id="pcbCanvasHeader"></canvas>
    <img src="logo.png" alt="Atelier Electronique MÃ©denine Logo" class="logo" />
    <h1 id="site-name">Atelier Electronique MÃ©denine</h1>
  </div>
  <div class="news-ticker" aria-live="polite" style="position: relative; z-index:10;">
    <div class="news-text" id="live-news">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±...</div>
  </div>
</header>

<main class="container main-content">
  <section class="info-bar">
    <div id="current-time">--:--:--</div>
    <div id="visit-count">Ø¹Ø¯Ø¯ Ø²ÙˆØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹: 0</div>
    <button id="toggle-lang-btn" class="btn-primary">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©</button>
  </section>

<!-- ======= User Info & Login ======= -->
<div id="user-info" style="display:none; text-align:center; margin:15px 0;">
  <p>Ù…Ø±Ø­Ø¨Ø§ <span id="user-name"></span>!</p>
  <button id="btn-signout">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>

<!-- Login Popup -->
<div id="login-popup">
  <div class="popup-content">
    <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
    <button id="btn-google">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨ÙˆØ§Ø³Ø·Ø© Google</button>
    <button id="btn-close-popup">Ø¥Ù„ØºØ§Ø¡</button>
  </div>
</div>
  <section class="cta-buttons">
    <a href="download" class="btn-download">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬  ğŸ“¥</a>
    <a href="store.html" class="btn-store">ØªÙØ³ÙˆÙ‘Ù‚ Ø§Ù„Ø¢Ù†  ğŸ›’</a>
    <a href="https://wa.me/21698192103" target="_blank" class="btn-whatsapp" rel="noopener">ÙˆØ§ØªØ³Ø§Ø¨  ğŸ“±</a>
    <a href="https://maps.app.goo.gl/nxBU8h2oFDEkiBFE9" target="_blank" class="btn-maps" rel="noopener">Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Ù…Ø§Ø¨Ø³  ğŸ“</a>
    <a href="photos.html" class="btn-gallery">Ø´Ø§Ù‡Ø¯ Ø§Ù„ØµÙˆØ±  ğŸ–¼ï¸</a>
    <a href="videos.html" class="btn-video">Ø´Ø§Ù‡Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ  ğŸ¥</a>
    <a href="services.html" class="btn-services">Ø®Ø¯Ù…Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø©  ğŸ› ï¸</a>
    <button id="radio-btn" class="btn-radio">Ø´ØºÙ‘Ù„ Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ  ğŸ“»</button>
    <audio id="radio-stream" src="https://stream.radiojar.com/8s5u5tpdtwzuv" preload="none"></audio>
    <div class="equalizer" id="equalizer" aria-hidden="true">
      <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
    </div>
  </section>

  <section class="experience-badge">Ø£ÙƒØ«Ø± Ù…Ù† 10 Ø³Ù†ÙˆØ§Øª Ø®Ø¨Ø±Ø©</section>

  <!-- ======= Weather Section ======= -->
  <section class="weather-box">
    <h3>ğŸŒ¦ï¸ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ù…Ø¯Ù†ÙŠÙ†</h3>
    <div class="weather-temp" id="weather-temp">--Â°C</div>
    <div class="weather-desc" id="weather-desc">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
  </section>

  <section class="faq">
    <h2>Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</h2>
    <div class="faq-item"><h3>ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø¬Ù‡Ø§Ø² Ù„Ù„Ø¥ØµÙ„Ø§Ø­ØŸ</h3><div class="answer">ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø£Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù….</div></div>
    <div class="faq-item"><h3>Ù…Ø§ Ù‡ÙŠ Ù…Ø¯Ø© Ø§Ù„ØªØµÙ„ÙŠØ­ Ø§Ù„Ù…Ø¹ØªØ§Ø¯Ø©ØŸ</h3><div class="answer">ØªØ®ØªÙ„Ù Ø­Ø³Ø¨ Ø§Ù„Ø¹Ø·Ù„ØŒ ØºØ§Ù„Ø¨Ø§Ù‹ Ù„Ø§ ØªØªØ¬Ø§ÙˆØ² 3 Ø£ÙŠØ§Ù….</div></div>
    <div class="faq-item"><h3>Ù‡Ù„ ØªÙˆÙØ±ÙˆÙ† Ù‚Ø·Ø¹ ØºÙŠØ§Ø± Ø£ØµÙ„ÙŠØ©ØŸ</h3><div class="answer">Ù†Ø¹Ù…ØŒ Ù†ÙˆÙØ± Ù‚Ø·Ø¹ ØºÙŠØ§Ø± Ø£ØµÙ„ÙŠØ© ÙˆØ°Ø§Øª Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©.</div></div>
    <div class="faq-item"><h3>ÙƒÙŠÙ Ø£ØªØ§Ø¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥ØµÙ„Ø§Ø­ØŸ</h3><div class="answer">Ù†Ø±Ø³Ù„ ØµÙˆØ± ÙˆÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ù‡Ø§Ø² Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØµÙ„ÙŠØ­ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨.</div></div>
  </section>

 <div class="rating-container">
  <p id="rating-title">Ù‚ÙŠÙ… Ø§Ù„ÙˆØ±Ø´Ø©:</p>
  <div class="stars-horizontal">
    <span data-value="5">â˜†</span>
    <span data-value="4">â˜†</span>
    <span data-value="3">â˜†</span>
    <span data-value="2">â˜†</span>
    <span data-value="1">â˜†</span>
  </div>
  <p id="rating-value">0/5</p>
</div>

 <!-- ======= Ø®Ø¯Ù…Ø§Øª Ø§Ù„ÙŠÙˆÙ… ======= -->
<section class="services-today">
  <h2>Ø®Ø¯Ù…Ø§Øª Ø§Ù„ÙŠÙˆÙ…</h2>

  <!-- ØµÙˆØ± -->
  <div class="services-slider" id="servicesSlider">
    <div class="service-card">
      <img src="service1.webp">
      <p class="service-caption">ØªØµÙ„ÙŠØ­ Ù„ÙˆØ­Ø§Øª Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</p>
    </div>
    <div class="service-card">
      <img src="service2.webp">
      <p class="service-caption">ØªØµÙ„ÙŠØ­ ÙƒØ§Ø±Øª Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…Ø´ÙŠ</p>
    </div>
    <div class="service-card">
      <img src="service3.webp">
      <p class="service-caption">ØªØµÙ„ÙŠØ­ ÙƒØ§Ø±Øª ØºØ³Ø§Ù„Ø©</p>
    </div>
       <div class="service-card">
      <img src="service4.webp">
      <p class="service-caption">ØªØµÙ„ÙŠØ­ ÙƒØ§Ø±Øª ØªÙ„ÙØ§Ø²</p>
    </div>
       <div class="service-card">
      <img src="service5.webp">
      <p class="service-caption">ØªØµÙ„ÙŠØ­ ÙƒØ§Ø±Øª ØªÙ„ÙØ§Ø²</p>
    </div>
  </div>

  <!-- ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª -->
  <div class="services-slider" id="videoSlider">
    <div class="service-card video-card">
      <video src="video1.mp4" muted loop></video>
      <p class="service-caption">ØªØµÙ„ÙŠØ­ ÙƒØ§Ø±Øª ØªØºØ°ÙŠØ©</p>
    </div>

    <div class="service-card video-card">
      <video src="video2.mp4" muted loop></video>
      <p class="service-caption">Ø¥ØµÙ„Ø§Ø­ Ù„ÙˆØ­Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</p>
    </div>

    <div class="service-card video-card">
      <video src="video3.mp4" muted loop></video>
      <p class="service-caption">ÙØ­Øµ Ø¨ÙˆØ±Ø¯Ø©</p>
    </div>
       <div class="service-card video-card">
      <video src="video4.mp4" muted loop></video>
      <p class="service-caption">ÙØ­Øµ Ø¨ÙˆØ±Ø¯Ø©</p>
    </div>
       <div class="service-card video-card">
      <video src="video5.mp4" muted loop></video>
      <p class="service-caption">ÙØ­Øµ Ø¨ÙˆØ±Ø¯Ø©</p>
    </div>
  </div>
</section>

</main>

<footer>
  <div class="container footer-inner">
    <p>ğŸ“ Ù…Ø¯Ù†ÙŠÙ† â€“ Ù†Ø®Ø¯Ù…Ùˆ ÙÙŠ ÙƒØ§Ù…Ù„ Ø£Ù†Ø­Ø§Ø¡ ØªÙˆÙ†Ø³ | ğŸ“² WhatsApp:98192103</p>
    <p>â° Ù…Ù† Ø§Ù„Ø¥Ø«Ù†ÙŠÙ† Ù„Ù„Ø³Ø¨ØªØŒ 08:00 - 18:00 | Ø§Ù„Ø£Ø­Ø¯ Ø±Ø§Ø­Ø©</p>
    <div class="social-icons">
      <a href="https://www.facebook.com/AEMednine" target="_blank" rel="noopener"><img src="icons/facebook.svg" alt="Facebook" /></a>
      <a href="https://www.instagram.com/aemedenine/" target="_blank" rel="noopener"><img src="icons/instagram.svg" alt="Instagram" /></a>
      <a href="https://wa.me/21698192103" target="_blank" rel="noopener"><img src="icons/whatsapp.svg" alt="WhatsApp" /></a>
    </div>
  </div>
</footer>

<div class="site-signature" style="text-align:center; color:#aaa; font-size:0.9rem; margin-top:10px; padding-bottom:10px;">
  &copy; 2025 Atelier Electronique MÃ©denine. Tous droits rÃ©servÃ©s. <br>
  Signature: RAHMANI Soufien. CHATGPT Lbb
</div>
<!-- ======= Fullscreen Media Viewer ======= -->
<div id="mediaViewer">
  <span class="close-btn">&times;</span>
  <img id="viewerImg" style="display:none" alt="ØµÙˆØ±Ø© ØªÙƒØ¨ÙŠØ±">
  <video id="viewerVideo" style="display:none" controls></video>
</div>

<style>
/* ======= Fullscreen Media Viewer CSS ======= */
#mediaViewer {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.9);
  justify-content: center;
  align-items: center;
  z-index: 99999;
  flex-direction: column;
}

#mediaViewer img, #mediaViewer video {
  max-width: 90%;
  max-height: 90%;
  border-radius: 12px;
  box-shadow: 0 0 25px #0ff;
}

#mediaViewer .close-btn {
  position: absolute;
  top: 20px;
  right: 30px;
  font-size: 2.5rem;
  color: #fff;
  cursor: pointer;
  z-index: 100000;
  background: rgba(0,0,0,0.3);
  padding: 5px 12px;
  border-radius: 50%;
  transition: all 0.3s ease;
}

#mediaViewer .close-btn:hover {
  background: rgba(255,0,0,0.7);
  transform: scale(1.2);
}
</style>

<script>
// ======= Fullscreen Media Viewer JS =======
document.addEventListener('DOMContentLoaded', () => {
  const mediaViewer = document.getElementById('mediaViewer');
  const viewerImg = document.getElementById('viewerImg');
  const viewerVideo = document.getElementById('viewerVideo');
  const closeBtn = mediaViewer.querySelector('.close-btn');
// ======= Total Visitors Counter =======
const db = firebase.database(); // Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
const visitsRef = db.ref('visits');

// Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø¯Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ÙƒÙ„ Ø²ÙŠØ§Ø±Ø©
visitsRef.transaction(current => (current || 0) + 1);

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø¯ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹
let totalVisits = 0;

visitsRef.on('value', snapshot => {
  totalVisits = snapshot.val() || 0;
  updateVisitText(currentLanguage, totalVisits);
});

  // ÙØªØ­ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø¨Ø§Ù„Ù€ fullscreen
  document.querySelectorAll('.service-card img, .service-card video').forEach(el => {
    el.style.cursor = 'pointer';
    el.addEventListener('click', () => {
      mediaViewer.style.display = 'flex';
      if(el.tagName === 'IMG'){
        viewerImg.src = el.src;
        viewerImg.style.display = 'block';
        viewerVideo.style.display = 'none';
        viewerVideo.pause();
      } else if(el.tagName === 'VIDEO'){
        viewerVideo.src = el.src;
        viewerVideo.style.display = 'block';
        viewerImg.style.display = 'none';
        viewerVideo.play();
      }
    });
  });

  // Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
  closeBtn.addEventListener('click', () => {
    mediaViewer.style.display = 'none';
    viewerVideo.pause();
    viewerVideo.currentTime = 0;
  });
});
</script>
<div id="cmp-banner">
  Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙƒÙˆÙƒÙŠØ² Ù„ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨ØªÙƒ. 
  <button id="consent-allow">Ø£ÙˆØ§ÙÙ‚</button>
  <button id="consent-manage">ØªØºÙŠÙŠØ± Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª</button>
</div>

<script src="app.js" defer></script>
<script>

// ======= CMP Script + ÙƒÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ =======
document.addEventListener('DOMContentLoaded', () => {
 // ======= Fullscreen Media Viewer =======
const mediaViewer = document.getElementById('mediaViewer');
const viewerImg = document.getElementById('viewerImg');
const viewerVideo = document.getElementById('viewerVideo');
const closeBtn = mediaViewer.querySelector('.close-btn');

// ÙƒÙ„ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù„ÙŠ ØªØ­Ø¨ ØªÙØªØ­ ÙÙŠ fullscreen
document.querySelectorAll('.service-card img, .service-card video').forEach(el => {
  el.style.cursor = 'pointer';
  el.addEventListener('click', () => {
    mediaViewer.style.display = 'flex';
    if(el.tagName === 'IMG'){
      viewerImg.src = el.src;
      viewerImg.style.display = 'block';
      viewerVideo.style.display = 'none';
      viewerVideo.pause();
    } else if(el.tagName === 'VIDEO'){
      viewerVideo.src = el.src;
      viewerVideo.style.display = 'block';
      viewerImg.style.display = 'none';
      viewerVideo.play();
    }
  });
});

// Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
closeBtn.addEventListener('click', () => {
  mediaViewer.style.display = 'none';
  viewerVideo.pause();
  viewerVideo.currentTime = 0;
});

  const cmpBanner = document.getElementById('cmp-banner');
  const consentAllow = document.getElementById('consent-allow');
  const consentManage = document.getElementById('consent-manage');

  if(!localStorage.getItem('cmpConsent')) cmpBanner.style.display='block';

  consentAllow.addEventListener('click', () => {
    localStorage.setItem('cmpConsent','granted');
    cmpBanner.style.display='none';
  });

  consentManage.addEventListener('click', () => {
    alert('ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¯Ø§Ø±Ø© ØªÙØ¶ÙŠÙ„Ø§Øª Ø§Ù„ÙƒÙˆÙƒÙŠØ² Ù‡Ù†Ø§.');
  });

  const siteName = document.getElementById('site-name');
  const texts = ["Atelier Electronique MÃ©denine", " Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠÙƒ Ø§Ù„Ø±Ø­Ù…Ù€Ø§Ù†ÙŠ"];
  setInterval(() => {
    const randomIndex = Math.floor(Math.random()*texts.length);
    siteName.textContent = texts[randomIndex];
    siteName.style.color='#ff6b35';
    siteName.style.textShadow='0 0 10px #e0a800';
    siteName.style.transform='scale(1.2)';
    setTimeout(()=>{ siteName.style.color=''; siteName.style.textShadow=''; siteName.style.transform=''; },1000);
  },4000);

  // ======= Weather Script =======
  let currentLanguage = 'ar';
 // ======= Visits Counter =======
let totalVisits = 0; // Ù…ØªØºÙŠØ± Ø¹Ø§Ù… Ù„Ù„Ø¹Ø¯Ø¯

const db = firebase.database();
const visitsRef = db.ref('visits');

// Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø¯Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ÙƒÙ„ Ø²ÙŠØ§Ø±Ø©
visitsRef.transaction(current => (current || 0) + 1);

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø¯ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ©
visitsRef.on('value', snapshot => {
  totalVisits = snapshot.val() || 0;
  updateVisitText(currentLanguage, totalVisits);
});
  function updateWeather(language) {
    fetch("https://api.open-meteo.com/v1/forecast?latitude=33.3549&longitude=10.5055&current_weather=true")
    .then(res => res.json())
    .then(data => {
      const temp = data.current_weather.temperature + "Â°C";
      const wind = data.current_weather.windspeed + (language==='fr' ? " km/h" : " ÙƒÙ…/Ø³");
      document.getElementById("weather-temp").textContent = temp;
      if(language === 'ar') {
        document.querySelector(".weather-box h3").textContent = "ğŸŒ¦ï¸ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ù…Ø¯Ù†ÙŠÙ†";
        document.getElementById("weather-desc").textContent = "ğŸŒ¬ï¸ Ø³Ø±Ø¹Ø© Ø§Ù„Ø±ÙŠØ§Ø­: " + wind;
      } else if(language === 'fr') {
        document.querySelector(".weather-box h3").textContent = "ğŸŒ¦ï¸ MÃ©tÃ©o Ã  MÃ©denine";
        document.getElementById("weather-desc").textContent = "ğŸŒ¬ï¸ Vitesse du vent: " + wind;
      }
    }).catch(()=>{document.getElementById("weather-desc").textContent="âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù‚Ø³";});
  }

  const ratingTitle = document.getElementById('rating-title');
  function updateLanguageTexts(lang) {
    ratingTitle.textContent = (lang==='ar') ? 'Ù‚ÙŠÙ… Ø§Ù„ÙˆØ±Ø´Ø©:' : 'Ã‰valuez lâ€™atelier :';
  }

  // Toggle Language
  document.getElementById('toggle-lang-btn').addEventListener('click', () => {
    currentLanguage = (currentLanguage === 'ar') ? 'fr' : 'ar';
    updateWeather(currentLanguage);
    updateLanguageTexts(currentLanguage);
    updateServiceCaptions(currentLanguage);
    updateVisitText(currentLanguage, totalVisits);
  });

  updateLanguageTexts(currentLanguage);
  updateWeather(currentLanguage);
function updateVisitText(lang, total) {
  const visitCountElem = document.getElementById('visit-count');
  if (!visitCountElem) return;

  if (lang === 'ar') {
    visitCountElem.textContent = 'Ø¹Ø¯Ø¯ Ø²ÙˆØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹: ' + total;
  } else {
    visitCountElem.textContent = 'Nombre de visiteurs : ' + total;
  }
}
  // ======= Rating =======
  const starsHorizontal = document.querySelectorAll('.stars-horizontal span');
  const ratingValueHorizontal = document.getElementById('rating-value');
  let selectedRatingHorizontal = parseInt(localStorage.getItem('workshopRating')) || 0;

  function updateStars(rating){
    starsHorizontal.forEach(star=>{
      star.classList.remove('selected'); 
      if(Number(star.dataset.value)<=rating) star.classList.add('selected'); 
      star.textContent = Number(star.dataset.value)<=rating?'â˜…':'â˜†';
    });
    ratingValueHorizontal.textContent = `${rating}/5`;
    ratingValueHorizontal.style.color = rating>0?'gold':'#fff';
    ratingValueHorizontal.style.textShadow = rating>0?'0 0 8px gold':'none';
  }
  updateStars(selectedRatingHorizontal);

  starsHorizontal.forEach(star=>{
    const val = Number(star.dataset.value);
    star.addEventListener('mouseover',()=>{
      starsHorizontal.forEach(s=>s.classList.remove('hover')); 
      starsHorizontal.forEach(s=>{ if(Number(s.dataset.value)<=val) s.classList.add('hover'); }); 
      ratingValueHorizontal.style.color='gold'; ratingValueHorizontal.style.textShadow='0 0 8px gold';
    });
    star.addEventListener('mouseout',()=>{
      starsHorizontal.forEach(s=>s.classList.remove('hover')); 
      updateStars(selectedRatingHorizontal); 
    });
    star.addEventListener('click',()=>{
      selectedRatingHorizontal=val; 
      localStorage.setItem('workshopRating',selectedRatingHorizontal); 
      updateStars(selectedRatingHorizontal);
    });
  });

  // ======= PCB Animated Header =======
  const canvas = document.getElementById('pcbCanvasHeader');
  const ctx = canvas.getContext('2d');
  function resizeCanvas(){ canvas.width=canvas.parentElement.offsetWidth; canvas.height=canvas.parentElement.offsetHeight; }
  window.addEventListener('resize',resizeCanvas);
  resizeCanvas();
  const traces=[];
  for(let i=0;i<50;i++){
    traces.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,length:50+Math.random()*150,speed:0.5+Math.random()*1.5,color:'rgba(0,255,255,0.5)',particles:[]});
    for(let j=0;j<5;j++){traces[i].particles.push({offset:Math.random()*traces[i].length,speed:1+Math.random()*2,size:2+Math.random()*2});}
  }
  let mouseX=-1000,mouseY=-1000;
  window.addEventListener('mousemove', e=>{mouseX=e.clientX; mouseY=e.clientY;});
  function animatePCB(){ 
    ctx.clearRect(0,0,canvas.width,canvas.height); 
    traces.forEach(t=>{
      const dx=t.x+t.length/2-mouseX, dy=t.y-mouseY, dist=Math.sqrt(dx*dx+dy*dy); 
      let speedMultiplier=dist<200?3:1; 
      ctx.beginPath(); ctx.moveTo(t.x,t.y); ctx.lineTo(t.x+t.length,t.y); 
      ctx.strokeStyle=t.color; ctx.lineWidth=2; ctx.shadowColor='#0ff'; ctx.shadowBlur=10; ctx.stroke(); 
      t.particles.forEach(p=>{
        let px=t.x+p.offset, py=t.y; ctx.beginPath(); ctx.arc(px,py,p.size,0,Math.PI*2); ctx.fillStyle='#0ff'; ctx.shadowColor='#0ff'; ctx.shadowBlur=10; ctx.fill(); 
        p.offset+=p.speed*speedMultiplier; if(p.offset>t.length)p.offset=0;
      }); 
      t.x+=t.speed*speedMultiplier; if(t.x>canvas.width)t.x=-t.length;
    }); 
    requestAnimationFrame(animatePCB); 
  }
  animatePCB();

  // ======= Slider Drag =======
function enableDragScroll(id) {
  const slider = document.getElementById(id);
  if (!slider) return;

  let isDown = false;
  let startX;
  let scrollLeft;

  slider.addEventListener('mousedown', e => {
    isDown = true;
    startX = e.pageX - slider.offsetLeft;
    scrollLeft = slider.scrollLeft;
  });

  slider.addEventListener('mouseleave', () => isDown = false);
  slider.addEventListener('mouseup', () => isDown = false);

  slider.addEventListener('mousemove', e => {
    if (!isDown) return;
    e.preventDefault();
    const x = e.pageX - slider.offsetLeft;
    const walk = (x - startX) * 1.5;
    slider.scrollLeft = scrollLeft - walk;
  });
}

enableDragScroll('servicesSlider');
enableDragScroll('videoSlider');

document.querySelectorAll('.video-card video').forEach(video => {
  video.addEventListener('mouseenter', () => video.play());
  video.addEventListener('mouseleave', () => {
    video.pause();
    video.currentTime = 0;
  });
});

  // ======= Radio Button Dance Script =======
  const radioBtn = document.getElementById('radio-btn');
  let dancing = false;
  radioBtn.addEventListener('click', () => {
    dancing = !dancing;
    if(dancing) { radioBtn.classList.add('dance'); } else { radioBtn.classList.remove('dance'); }
  });

  // ======= Service Captions Translations + Section Title =======
  const serviceTranslations = {
    ar: {
      title: "Ø®Ø¯Ù…Ø§Øª Ø§Ù„ÙŠÙˆÙ…",
      captions: [
        "ØªØµÙ„ÙŠØ­ Ù„ÙˆØ­Ø§Øª Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©",
        "ØªØµÙ„ÙŠØ­ ÙƒØ§Ø±Øª Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…Ø´ÙŠ",
        "ØªØµÙ„ÙŠØ­ ÙƒØ§Ø±Øª Ù…Ø§ÙƒÙŠÙ†Ø© ØºØ³ÙŠÙ„",
        "ØªØµÙ„ÙŠØ­ ÙƒØ§Ø±Øª ØªÙ„ÙØ§Ø²",
        "ØªØµÙ„ÙŠØ­ ÙƒØ§Ø±Øª ØºØ³Ø§Ù„Ø© Ù„-Ø¬"
      ]
    },
    fr: {
      title: "Services du jour",
      captions: [
        "rÃ©paration de cartes Ã©lectroniques",
        "rÃ©paration carte tapis roulant",
        "rÃ©paration carte lave-linge",
        "rÃ©paration carte television",
        "rÃ©paration carte lave-linge LG"
      ]
    }
      
  };
  function updateServiceCaptions(lang){
    document.querySelector('.services-today h2').textContent = serviceTranslations[lang].title;
    const captions = document.querySelectorAll('.service-caption');
    captions.forEach((cap, idx) => { cap.textContent = serviceTranslations[lang].captions[idx]; });
  }
  updateServiceCaptions(currentLanguage);

});
</script>
</body>
</html>

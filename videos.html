<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø© | Atelier Electronique MÃ©denine</title>

  <style>
    body {
      font-family:'Montserrat','Open Sans',sans-serif;
      background:linear-gradient(135deg,#fff,#fff);
      color:#eee; direction:rtl; text-align:center; margin:20px;
    }
    .container { max-width:900px; margin:auto; }

    h1 { color:#282c34; margin-bottom:15px; }

    .lang-btn {
      margin-bottom:20px; padding:8px 15px; background:#ff6b35;
      border:none; border-radius:6px; color:#fff; font-weight:bold;
      cursor:pointer;
    }
    .lang-btn:hover { background:#409eff; }

    .video-gallery {
      display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
      gap:20px; margin-bottom:40px;
    }

    .video-card {
      background:#fff; padding:10px; border-radius:10px;
      box-shadow:0 0 8px #1e90ff; position:relative; overflow:hidden;
    }

    video {
      width:100%; border-radius:8px; cursor:pointer; transition:0.3s;
    }
    video:hover {
      transform:scale(1.02); box-shadow:0 0 12px #1e90ff;
    }

    .views,.reactions,.comments { margin-top:10px; font-size:0.95rem; }

    .reactions button {
      margin:0 5px; padding:5px 10px; border:none; border-radius:6px;
      cursor:pointer; font-size:1.1rem; background:#1e90ff; color:white;
    }

    .comments textarea {
      width:80%; border-radius:6px; padding:5px; margin-top:10px;
      vertical-align:middle;
    }
    .comments button.add-comment-btn {
      padding:6px 10px; border:none; border-radius:6px;
      margin-left:8px; cursor:pointer; font-weight:700;
      background:#409eff; color:white;
    }

    .comments ul {
      text-align:right; padding-right:20px; list-style:disc; margin-top:10px;
    }
    .comments li { font-size:0.9rem; color:#ccc; }

    /* Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ */
    a.btn-return {
      background:#ff6b35; color:#fff; padding:12px 25px; border-radius:8px;
      font-weight:700; display:block; width:250px; margin:20px auto;
      text-decoration:none; box-shadow:0 0 8px #ff6b35;
    }
    a.btn-return:hover { background:#409eff; }

    /* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
    #video-modal {
      display:none; position:fixed; z-index:1000; left:0; top:0;
      width:100%; height:100%; background:rgba(0,0,0,0.85);
      justify-content:center; align-items:center;
    }
    #video-modal video {
      max-width:90%; max-height:80%; border-radius:10px;
      box-shadow:0 0 20px #1e90ff;
    }
    #video-modal .close-btn {
      position:absolute; top:15px; right:20px; font-size:2.5rem;
      color:white; cursor:pointer; font-weight:bold;
    }

    /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ */
    .popup-emoji {
      position:absolute; font-size:2rem; pointer-events:none;
      animation:float 1.2s ease-out forwards;
    }
    @keyframes float {
      0%{opacity:1; transform:translateY(0);}
      100%{opacity:0; transform:translateY(-50px);}
    }
  </style>
</head>

<body>
<div class="container">

  <h1 id="page-title">ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø©</h1>

  <button class="lang-btn" id="toggle-lang-btn">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©</button>

  <div class="video-gallery" id="video-gallery"></div>

  <a href="index.html" class="btn-return" id="return-btn">â¬…ï¸ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
</div>

<!-- Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ -->
<div id="video-modal">
  <span class="close-btn" id="close-modal">&times;</span>
  <video id="modal-video" controls></video>
</div>

<script>
const videos=[{src:"video1.mp4"},{src:"video2.mp4"},{src:"video3.mp4"},{src:"video4.mp4"},{src:"video5.mp4"},{src:"video6.mp4"},{src:"Video7.mp4"},{src:"Video8.mp4"},{src:"Video9.mp4"}];

const texts={
  ar:{title:"ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø©",toggle:"ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©",views:"Ù…Ø´Ø§Ù‡Ø¯Ø©",return:"â¬…ï¸ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",commentPlaceholder:"Ø£Ø¶Ù ØªØ¹Ù„ÙŠÙ‚Ù‹Ø§..."},
  fr:{title:"VidÃ©os de l'atelier",toggle:"Changer la langue",views:"vue",return:"â¬…ï¸ Retour Ã  la page principale",commentPlaceholder:"Ajouter un commentaire..."}
};

let currentLang=localStorage.getItem('lang')||'ar';

const gallery=document.getElementById('video-gallery');
const modal=document.getElementById('video-modal');
const modalVideo=document.getElementById('modal-video');
const closeBtn=document.getElementById('close-modal');
const toggleBtn=document.getElementById('toggle-lang-btn');

function renderVideos(){
  gallery.innerHTML='';
  videos.forEach((video,index)=>{
    const vid=`video${index}`;
    const viewsKey=vid+"-views";
    const reactsKey=vid+"-reacts";
    const commentsKey=vid+"-comments";

    let views=parseInt(localStorage.getItem(viewsKey))||0;
    let reacts=JSON.parse(localStorage.getItem(reactsKey))||{like:0,love:0,laugh:0};
    let comments=JSON.parse(localStorage.getItem(commentsKey))||[];

    const card=document.createElement("div");
    card.className="video-card";

    card.innerHTML=`
      <video onclick="openModal('${video.src}','${viewsKey}')" preload="metadata" muted>
        <source src="${video.src}" type="video/mp4">
      </video>

      <div class="views">${views} ${texts[currentLang].views}</div>

      <div class="reactions">
        <button onclick="react(event,'${reactsKey}','like')">ğŸ‘ ${reacts.like}</button>
        <button onclick="react(event,'${reactsKey}','love')">â¤ï¸ ${reacts.love}</button>
        <button onclick="react(event,'${reactsKey}','laugh')">âœ¨ ${reacts.laugh}</button>
      </div>

      <div class="comments">
        <textarea placeholder="${texts[currentLang].commentPlaceholder}" id="c-${commentsKey}"></textarea>
        <button class="add-comment-btn" onclick="addComment('${commentsKey}')">ğŸ“©</button>
        <ul>${comments.map(c=>`<li>${c}</li>`).join("")}</ul>
      </div>
    `;

    gallery.appendChild(card);
  });
}

function openModal(src,viewsKey){
  modal.style.display="flex";
  modalVideo.src=src;
  modalVideo.play();

  let v=parseInt(localStorage.getItem(viewsKey))||0;
  localStorage.setItem(viewsKey,++v);

  renderVideos();
  showEmoji();
}

function closeModal(){
  modal.style.display="none";
  modalVideo.pause();
  modalVideo.src="";
}

closeBtn.onclick=closeModal;
modal.onclick=e=>{ if(e.target===modal) closeModal(); };

function react(e,key,type){
  e.stopPropagation();
  let r=JSON.parse(localStorage.getItem(key))||{like:0,love:0,laugh:0};
  r[type]++;
  localStorage.setItem(key,JSON.stringify(r));
  renderVideos();
}

function addComment(key){
  let textarea=document.getElementById("c-"+key);
  let text=textarea.value.trim();
  if(text){
    let comments=JSON.parse(localStorage.getItem(key))||[];
    comments.push(text);
    localStorage.setItem(key,JSON.stringify(comments));
    textarea.value="";
    renderVideos();
  }
}

function applyLang(){
  document.getElementById("page-title").textContent=texts[currentLang].title;
  document.getElementById("return-btn").textContent=texts[currentLang].return;
  toggleBtn.textContent=texts[currentLang].toggle;
}

toggleBtn.onclick=()=>{
  currentLang=currentLang==="ar"?"fr":"ar";
  localStorage.setItem("lang",currentLang);
  applyLang();
  renderVideos();
};

function showEmoji(){
  const emoji=document.createElement("div");
  emoji.className="popup-emoji";
  emoji.textContent=Math.random()>0.5?'â¤ï¸':'âœ¨';
  modal.appendChild(emoji);

  const r=modalVideo.getBoundingClientRect();
  emoji.style.left=(r.left+r.width/2-20)+"px";
  emoji.style.top=(r.top+r.height/2-20)+"px";

  setTimeout(()=>emoji.remove(),1200);
}

document.addEventListener("DOMContentLoaded",()=>{
  applyLang();
  renderVideos();
});
</script>

</body>
</html>

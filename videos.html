<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø© | Atelier Electronique MÃ©denine</title>
  <style>
    body { font-family:'Montserrat','Open Sans',sans-serif; background:linear-gradient(135deg,#0b1a27,#122f4a); color:#eee; direction:rtl; text-align:center; margin:20px; }
    .container { max-width:900px; margin:auto; }
    h1 { color:#1e90ff; margin-bottom:15px; }
    .lang-btn { margin-bottom:20px; padding:8px 15px; background-color:#ff6b35; border:none; border-radius:6px; color:#fff; font-weight:bold; cursor:pointer; }
    .lang-btn:hover { background-color:#d9533f; }
    .video-gallery { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:20px; margin-bottom:40px; }
    .video-card { background:#0f2238; padding:10px; border-radius:10px; box-shadow:0 0 8px #1e90ff; position:relative; overflow:hidden; }
    video { width:100%; border-radius:8px; cursor:pointer; transition:0.3s; }
    video:hover { transform:scale(1.02); box-shadow:0 0 12px #1e90ff; }
    .views, .reactions, .comments { margin-top:10px; font-size:0.95rem; }
    .reactions button { margin:0 5px; padding:5px 10px; border:none; border-radius:6px; cursor:pointer; font-size:1.1rem; }
    .comments textarea { width:80%; border-radius:6px; padding:5px; margin-top:10px; vertical-align:middle; }
    .comments button.add-comment-btn { padding:6px 10px; border:none; border-radius:6px; margin-left:8px; cursor:pointer; font-weight:700; background-color:#ff6b35; color:white; box-shadow:0 2px 6px rgba(255,107,53,0.7); vertical-align:middle; }
    .comments button.add-comment-btn:hover { background-color:#d9533f; box-shadow:0 4px 12px rgba(217,83,63,0.9); }
    .comments ul { text-align:right; padding-right:20px; list-style:disc; margin-top:10px; }
    .comments li { font-size:0.9rem; color:#ccc; }
    button, a.btn-return { max-width:220px; margin:10px auto; display:block; background-color:#ff6b35; border:none; padding:12px 25px; border-radius:8px; color:white; font-weight:700; cursor:pointer; text-align:center; box-shadow:0 2px 6px rgba(255,107,53,0.7); transition:0.3s; text-decoration:none; }
    button:hover, a.btn-return:hover { background-color:#d9533f; box-shadow:0 4px 12px rgba(217,83,63,0.9); }
    #video-modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; background-color:rgba(0,0,0,0.85); justify-content:center; align-items:center; }
    #video-modal video { max-width:90%; max-height:80%; border-radius:10px; box-shadow:0 0 20px #1e90ff; }
    #video-modal .close-btn { position:absolute; top:15px; right:20px; font-size:2.5rem; color:white; cursor:pointer; font-weight:bold; user-select:none; }
    .popup-emoji { position:absolute; font-size:2rem; pointer-events:none; user-select:none; animation:float 1.2s ease-out forwards; }
    @keyframes float { 0%{opacity:1;transform:translateY(0);}100%{opacity:0;transform:translateY(-50px);} }
  </style>
</head>
<body>
<div class="container">
  <h1 id="page-title">ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø©</h1>
  <button class="lang-btn" id="toggle-lang-btn">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©</button>
  <div class="video-gallery" id="video-gallery"></div>
  <a href="index.html" id="return-btn" class="btn-return">â¬…ï¸ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
</div>

<div id="video-modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
  <span class="close-btn" id="close-modal" aria-label="Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ">&times;</span>
  <video id="modal-video" controls></video>
</div>

<script>
const videos = [
  {src:"video1.mp4"},{src:"video2.mp4"},{src:"video3.mp4"},{src:"video4.mp4"},{src:"video5.mp4"}
];
const texts = {
  ar:{title:"ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø©", toggle:"ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©", views:"Ù…Ø´Ø§Ù‡Ø¯Ø©", commentPlaceholder:"Ø£Ø¶Ù ØªØ¹Ù„ÙŠÙ‚Ù‹Ø§..."},
  fr:{title:"VidÃ©os de l'atelier", toggle:"Changer la langue", views:"vue", commentPlaceholder:"Ajouter un commentaire..."}
};
let currentLang = localStorage.getItem('lang')||'ar';

const gallery=document.getElementById('video-gallery');
const modal=document.getElementById('video-modal');
const modalVideo=document.getElementById('modal-video');
const closeBtn=document.getElementById('close-modal');
const toggleBtn=document.getElementById('toggle-lang-btn');

function renderVideos(){
  gallery.innerHTML='';
  videos.forEach((video,index)=>{
    const videoId=`video${index}`;
    const viewsKey=`${videoId}-views`;
    const reactsKey=`${videoId}-reacts`;
    const commentsKey=`${videoId}-comments`;
    let views=parseInt(localStorage.getItem(viewsKey))||0;
    let reacts=JSON.parse(localStorage.getItem(reactsKey))||{like:0,love:0,laugh:0};
    let comments=JSON.parse(localStorage.getItem(commentsKey))||[];
    const card=document.createElement('div'); card.className='video-card';
    card.innerHTML=`
      <video onclick="openModal('${video.src}','${viewsKey}')" preload="metadata" muted>
        <source src="${video.src}" type="video/mp4">
        Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.
      </video>
      <div class="views">${views} ${texts[currentLang].views}</div>
      <div class="reactions">
        <button onclick="react(event,'${reactsKey}','like',this)">ğŸ‘ ${reacts.like}</button>
        <button onclick="react(event,'${reactsKey}','love',this)">â¤ï¸ ${reacts.love}</button>
        <button onclick="react(event,'${reactsKey}','laugh',this)">ğŸ˜ ${reacts.laugh}</button>
      </div>
      <div class="comments">
        <textarea placeholder="${texts[currentLang].commentPlaceholder}" onkeydown="if(event.key==='Enter'){event.preventDefault(); addComment('${commentsKey}',this)}"></textarea>
        <button class="add-comment-btn" onclick="addComment('${commentsKey}',this.previousElementSibling)">ğŸ“©</button>
        <ul>${comments.map(c=>`<li>${c}</li>`).join('')}</ul>
      </div>
    `;
    gallery.appendChild(card);
  });
}

function incrementViews(key){let views=parseInt(localStorage.getItem(key))||0;localStorage.setItem(key,++views);renderVideos();}
function react(event,key,type,btn){event.stopPropagation();let reacts=JSON.parse(localStorage.getItem(key))||{like:0,love:0,laugh:0};reacts[type]++;localStorage.setItem(key,JSON.stringify(reacts));renderVideos();}
function addComment(key,textarea){const val=textarea.value.trim();if(val){let comments=JSON.parse(localStorage.getItem(key))||[];comments.push(val);localStorage.setItem(key,JSON.stringify(comments));textarea.value='';renderVideos();}}

function openModal(src,viewsKey){
  modal.style.display='flex';
  modalVideo.src=src;
  modalVideo.play();
  incrementViews(viewsKey);
  showEmoji();
}
function closeModal(){modal.style.display='none'; modalVideo.pause(); modalVideo.src=''; renderVideos();}
closeBtn.addEventListener('click',closeModal);
modal.addEventListener('click',e=>{if(e.target===modal) closeModal();});

toggleBtn.addEventListener('click',()=>{
  currentLang=currentLang==='ar'?'fr':'ar';
  localStorage.setItem('lang',currentLang);
  applyLang();
  renderVideos();
});
function applyLang(){
  document.documentElement.lang=currentLang;
  document.documentElement.dir=currentLang==='ar'?'rtl':'ltr';
  document.getElementById('page-title').textContent=texts[currentLang].title;
  document.getElementById('return-btn').textContent=currentLang==='ar'?'â¬…ï¸ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©':'â¬…ï¸ Retour Ã  la page principale';
  toggleBtn.textContent=texts[currentLang].toggle;
}

// Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
function showEmoji(){
  const emojiDiv=document.createElement('div');
  emojiDiv.className='popup-emoji';
  emojiDiv.textContent=Math.random()>0.5?'â¤ï¸':'âœ¨';
  modal.appendChild(emojiDiv);
  const rect=modalVideo.getBoundingClientRect();
  emojiDiv.style.left=(rect.left+rect.width/2-20)+'px';
  emojiDiv.style.top=(rect.top+rect.height/2-20)+'px';
  setTimeout(()=>emojiDiv.remove(),1200);
}

document.addEventListener('DOMContentLoaded',()=>{
  applyLang();
  renderVideos();
});
</script>
</body>
</html>
  

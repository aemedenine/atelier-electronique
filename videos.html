<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø© | Atelier Electronique MÃ©denine</title>

<style>
:root{
  --primary:#1e90ff;
  --bg:#f8f9fa;
  --card:#ffffff;
  --text:#2c3e50;
  --shadow:0 8px 24px rgba(0,0,0,.12);
}

*{box-sizing:border-box;margin:0;padding:0}

body{
  font-family:'Cairo','Montserrat',sans-serif;
  background:var(--bg);
  color:var(--text);
  direction:rtl;
  text-align:center;
  padding:20px;
}

.container{max-width:1000px;margin:auto}

h1{color:var(--primary);margin-bottom:20px}

.lang-btn{
  padding:10px 18px;
  background:var(--primary);
  border:none;
  border-radius:30px;
  color:#fff;
  font-weight:700;
  cursor:pointer;
  margin-bottom:25px;
}

.video-gallery{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(300px,1fr));
  gap:20px;
}

.video-card{
  background:var(--card);
  border-radius:16px;
  padding:12px;
  box-shadow:var(--shadow);
}

video{
  width:100%;
  border-radius:12px;
  cursor:pointer;
  transition:.3s;
}

video:hover{transform:scale(1.02)}

.views{margin-top:10px;font-weight:600}

.reactions{
  margin-top:10px;
}

.reactions button{
  margin:0 5px;
  padding:6px 14px;
  border:none;
  border-radius:20px;
  background:var(--primary);
  color:white;
  cursor:pointer;
  font-size:1.1rem;
}

.comments{
  margin-top:12px;
}

.comments textarea{
  width:80%;
  min-height:55px;
  border-radius:8px;
  padding:6px;
  margin-top:8px;
}

.comments button{
  margin-right:6px;
  padding:6px 14px;
  border:none;
  border-radius:20px;
  background:#409eff;
  color:white;
  cursor:pointer;
  font-weight:700;
}

.comments ul{
  text-align:right;
  margin-top:10px;
  padding-right:20px;
}

.comments li{
  font-size:.9rem;
  color:#555;
  margin-bottom:4px;
}

/* Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ */
a.btn-return{
  display:block;
  margin:35px auto 10px;
  width:280px;
  padding:14px;
  background:var(--primary);
  color:white;
  text-decoration:none;
  border-radius:30px;
  font-weight:700;
}

/* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
#video-modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.9);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}

#video-modal video{
  max-width:90%;
  max-height:80%;
  border-radius:16px;
  box-shadow:0 0 25px var(--primary);
}

.close-btn{
  position:absolute;
  top:20px;
  right:25px;
  font-size:2.5rem;
  color:white;
  cursor:pointer;
}

/* Ø¥ÙŠÙ…ÙˆØ¬ÙŠ */
.popup-emoji{
  position:absolute;
  font-size:2rem;
  animation:float 1.2s ease-out forwards;
  pointer-events:none;
}
@keyframes float{
  from{opacity:1;transform:translateY(0)}
  to{opacity:0;transform:translateY(-50px)}
}
</style>
</head>

<body>
<div class="container">

<h1 id="page-title">ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø©</h1>
<button class="lang-btn" id="toggle-lang-btn">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©</button>

<div class="video-gallery" id="video-gallery"></div>

<a href="index.html" class="btn-return" id="return-btn">
â¬…ï¸ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
</a>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ -->
<div id="video-modal">
<span class="close-btn" id="close-modal">&times;</span>
<video id="modal-video" controls></video>
</div>

<script>
const videos=[
 {src:"video1.mp4"},
 {src:"video2.mp4"},
 {src:"video3.mp4"},
 {src:"video4.mp4"}
];

const texts={
 ar:{
  title:"ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø©",
  toggle:"ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©",
  views:"Ù…Ø´Ø§Ù‡Ø¯Ø©",
  back:"â¬…ï¸ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
  comment:"Ø£Ø¶Ù ØªØ¹Ù„ÙŠÙ‚Ù‹Ø§..."
 },
 fr:{
  title:"VidÃ©os de l'atelier",
  toggle:"Changer la langue",
  views:"vue",
  back:"â¬…ï¸ Retour Ã  la page principale",
  comment:"Ajouter un commentaire..."
 }
};

let currentLang=localStorage.getItem("lang")||"ar";

const gallery=document.getElementById("video-gallery");
const modal=document.getElementById("video-modal");
const modalVideo=document.getElementById("modal-video");

function renderVideos(){
 gallery.innerHTML="";
 videos.forEach((v,i)=>{
  const key=`video-${i}`;
  const views=+localStorage.getItem(key+"-views")||0;
  const reacts=JSON.parse(localStorage.getItem(key+"-reacts"))||{like:0,love:0,star:0};
  const comments=JSON.parse(localStorage.getItem(key+"-comments"))||[];

  const card=document.createElement("div");
  card.className="video-card";
  card.innerHTML=`
   <video onclick="openModal('${v.src}','${key}')" muted preload="metadata">
    <source src="${v.src}" type="video/mp4">
   </video>

   <div class="views">${views} ${texts[currentLang].views}</div>

   <div class="reactions">
    <button onclick="react(event,'${key}','like')">ğŸ‘ ${reacts.like}</button>
    <button onclick="react(event,'${key}','love')">â¤ï¸ ${reacts.love}</button>
    <button onclick="react(event,'${key}','star')">âœ¨ ${reacts.star}</button>
   </div>

   <div class="comments">
    <textarea id="c-${key}" placeholder="${texts[currentLang].comment}"></textarea>
    <button onclick="addComment('${key}')">ğŸ“©</button>
    <ul>${comments.map(c=>`<li>${c}</li>`).join("")}</ul>
   </div>
  `;
  gallery.appendChild(card);
 });
}

function openModal(src,key){
 modal.style.display="flex";
 modalVideo.src=src;
 modalVideo.play();
 let v=+localStorage.getItem(key+"-views")||0;
 localStorage.setItem(key+"-views",++v);
 renderVideos();
 showEmoji();
}

function react(e,key,type){
 e.stopPropagation();
 let r=JSON.parse(localStorage.getItem(key+"-reacts"))||{like:0,love:0,star:0};
 r[type]++;
 localStorage.setItem(key+"-reacts",JSON.stringify(r));
 renderVideos();
}

function addComment(key){
 const ta=document.getElementById("c-"+key);
 if(!ta.value.trim())return;
 let c=JSON.parse(localStorage.getItem(key+"-comments"))||[];
 c.push(ta.value.trim());
 localStorage.setItem(key+"-comments",JSON.stringify(c));
 ta.value="";
 renderVideos();
}

function showEmoji(){
 const e=document.createElement("div");
 e.className="popup-emoji";
 e.textContent=Math.random()>0.5?"â¤ï¸":"âœ¨";
 modal.appendChild(e);
 e.style.left="50%";
 e.style.top="50%";
 setTimeout(()=>e.remove(),1200);
}

document.getElementById("close-modal").onclick=()=>{
 modal.style.display="none";
 modalVideo.pause();
 modalVideo.src="";
};

document.getElementById("toggle-lang-btn").onclick=()=>{
 currentLang=currentLang==="ar"?"fr":"ar";
 localStorage.setItem("lang",currentLang);
 applyLang();
 renderVideos();
};

function applyLang(){
 page-title.textContent=texts[currentLang].title;
 toggle-lang-btn.textContent=texts[currentLang].toggle;
 return-btn.textContent=texts[currentLang].back;
}

document.addEventListener("DOMContentLoaded",()=>{
 applyLang();
 renderVideos();
});
</script>

</body>
</html> 

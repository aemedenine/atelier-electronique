<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ðŸ¤– Robo AI Pro+ Ù…Ø¬Ø§Ù†ÙŠ - Ù„Ø¨ÙŠØ¨Ø©</title>
<style>
body { margin:0; background:radial-gradient(circle at top,#111,#000); font-family:Arial,Tahoma; color:white; position:relative; min-height:100vh; }
#container { width:150px; height:150px; position:absolute; bottom:20px; left:50%; transform:translateX(-50%); }
#chat { max-width:700px; margin:15px auto; text-align:right; padding:10px; }
#messages { background:rgba(20,20,20,0.9); padding:15px; border-radius:15px; height:260px; overflow-y:auto; box-shadow:0 0 20px #00ffcc44; }
.user { color:#0f0; text-align:left; margin:8px 0; }
.bot { color:#0ff; margin:8px 0; }
.controls { display:flex; gap:10px; margin-top:10px; }
input { flex:1; padding:12px; border-radius:10px; border:none; font-size:16px; outline:none; }
button { padding:12px 25px; background:linear-gradient(135deg,#0ff,#0f0); border:none; border-radius:10px; font-size:16px; cursor:pointer; font-weight:bold; }
</style>
</head>
<body>

<div id="container"></div>
<div id="chat">
  <div id="messages"></div>
  <div class="controls">
    <input id="input" placeholder="Ø§Ø³Ø£Ù„ Ø§Ù„Ø±ÙˆØ¨Ùˆ..." />
    <button onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.168/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.168/examples/js/loaders/GLTFLoader.min.js"></script>

<script>
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x000000);
const camera = new THREE.PerspectiveCamera(60,1,0.1,1000);
camera.position.set(0,1.3,4);

const renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});
renderer.setSize(150,150);
document.getElementById("container").appendChild(renderer.domElement);

scene.add(new THREE.AmbientLight(0xffffff,0.6));
const dirLight = new THREE.DirectionalLight(0xffffff,1);
dirLight.position.set(3,6,4);
scene.add(dirLight);

let robot, leftEye, rightEye, mouth, talking=false, blink=0;

const loader = new THREE.GLTFLoader();
loader.load("./robot.glb", gltf=>{
    robot = gltf.scene;
    robot.scale.set(0.5,0.5,0.5);
    robot.position.y=-1;
    scene.add(robot);

    leftEye = robot.getObjectByName("LeftEye");
    rightEye = robot.getObjectByName("RightEye");
    mouth = robot.getObjectByName("Mouth");

    animate();
}, xhr=>{ console.log("ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±ÙˆØ¨Ùˆ:", (xhr.loaded/xhr.total*100)+"%"); },
   err=>{ console.error("âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±ÙˆØ¨Ùˆ:", err);}
);

window.addEventListener("mousemove", e=>{
    if(leftEye && rightEye){
        const nx = (e.clientX/window.innerWidth -0.5)*2;
        const ny = (0.5 - e.clientY/window.innerHeight)*2;
        leftEye.rotation.y = nx*0.3; leftEye.rotation.x = ny*0.3;
        rightEye.rotation.y = nx*0.3; rightEye.rotation.x = ny*0.3;
    }
});

function animate(){
    requestAnimationFrame(animate);
    if(robot){
        robot.rotation.z = Math.sin(Date.now()*0.001)*0.02;
        robot.rotation.x = Math.sin(Date.now()*0.0015)*0.01;
        if(talking){ if(mouth) mouth.scale.y = 0.8 + Math.abs(Math.sin(Date.now()*0.05))*0.25; }
        else{ if(mouth) mouth.scale.y=1; blink++; if(blink%200===0){ if(leftEye&&rightEye){ leftEye.scale.y=0.1; rightEye.scale.y=0.1; setTimeout(()=>{leftEye.scale.y=1; rightEye.scale.y=1;},100); } } }
    }
    renderer.render(scene,camera);
}

// Chat AI Ù…Ø¬Ø§Ù†ÙŠ (Ø±Ø¯ÙˆØ¯ Ø¬Ø§Ù‡Ø²Ø©)
const messagesDiv = document.getElementById("messages");
const input = document.getElementById("input");

function send(){
    const text = input.value.trim();
    if(!text) return;
    addMsg(text,"user"); input.value=""; talking=true;

    // Ø±Ø¯ÙˆØ¯ Ù…Ø­Ù„ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©
    let reply="Ù…Ø´ ÙÙ‡Ù…ØªÙƒ ðŸ˜…";
    if(text.includes("Ù…Ø±Ø­Ø¨Ø§")) reply="Ù…Ø±Ø­Ø¨Ø§ Ø¨ÙŠÙƒ! Ø´Ù†ÙˆÙ‘Ø© ØªØ­Ø¨ ØªØ³Ø£Ù„Ù†ÙŠØŸ";
    else if(text.includes("ÙƒÙŠÙ Ø­Ø§Ù„Ùƒ")) reply="Ø£Ù†Ø§ Ø¨Ø®ÙŠØ± Ø­Ø¨ÙŠØ¨ÙŠØŒ Ø¥Ù†ØªØŸ";
    setTimeout(()=>{ addMsg(reply,"bot"); talking=false; },500);
}

function addMsg(text,who){
    const div=document.createElement("div");
    div.className=who;
    div.textContent=text;
    messagesDiv.appendChild(div);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

input.addEventListener("keydown", e=>{ if(e.key==="Enter") send(); });
</script>
</body>
</html>

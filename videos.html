 <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>فيديوهات الورشة | Atelier Electronique Médenine</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#1e90ff;
  --primary-dark:#1565c0;
  --bg:#f8f9fa;
  --card:#fff;
  --text:#2c3e50;
  --shadow:0 8px 24px rgba(0,0,0,.08);
}
[data-theme="dark"]{
  --bg:#121212;
  --card:#1e1e1e;
  --text:#eee;
  --shadow:0 8px 24px rgba(0,0,0,.4);
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:Cairo,sans-serif;
  background:var(--bg);
  color:var(--text);
  padding:1.5rem;
  transition:.3s;
}
.container{max-width:1200px;margin:auto}
h1{text-align:center;color:var(--primary);margin-bottom:1.5rem}

.controls{
  display:flex;
  justify-content:center;
  gap:1rem;
  margin-bottom:2rem;
  flex-wrap:wrap;
}
.btn{
  padding:.7rem 1.5rem;
  border-radius:30px;
  border:none;
  cursor:pointer;
  font-weight:bold;
}
.primary{background:var(--primary);color:#fff}
.outline{background:none;border:2px solid var(--primary);color:var(--primary)}

.gallery{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(300px,1fr));
  gap:1.5rem;
}

.card{
  background:var(--card);
  border-radius:16px;
  box-shadow:var(--shadow);
  overflow:hidden;
  transition:.3s;
}
.card:hover{transform:translateY(-8px)}

.card video{
  width:100%;
  height:220px;
  object-fit:cover;
  cursor:pointer;
}

.comment{
  padding:1rem;
}
.comment textarea{
  width:100%;
  resize:none;
  border-radius:8px;
  padding:.5rem;
}
.comment button{
  margin-top:.4rem;
  background:var(--primary);
  color:#fff;
  border:none;
  padding:.4rem 1rem;
  border-radius:20px;
}
.comment ul{
  margin-top:.6rem;
  font-size:.9rem;
  padding-right:1rem;
}

/* popup video */
.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.9);
  display:none;
  place-items:center;
  z-index:999;
}
.popup video{
  max-width:90%;
  max-height:90%;
  border-radius:12px;
}
</style>
</head>

<body>
<div class="container">
  <h1 id="title">فيديوهات الورشة</h1>

  <div class="controls">
    <button class="btn primary" id="langBtn">تبديل اللغة</button>
    <button class="btn outline" id="themeBtn">الوضع الداكن ☾</button>
  </div>

  <div class="gallery" id="gallery"></div>

  <div style="text-align:center;margin-top:3rem">
    <a href="index.html" class="btn primary" id="backBtn">⬅️ الرجوع للرئيسية</a>
  </div>
</div>

<div class="popup" id="popup">
  <video controls id="popupVideo"></video>
</div>

<script>
const videos=[
  "video1.mp4",
  "video2.mp4",
  "video3.mp4"
];

const txt={
  ar:{
    title:"فيديوهات الورشة",
    back:"⬅️ الرجوع للرئيسية",
    ph:"أضف تعليق...",
    send:"إرسال"
  },
  fr:{
    title:"Vidéos de l'atelier",
    back:"⬅️ Retour",
    ph:"Ajouter un commentaire...",
    send:"Envoyer"
  }
};

let lang=localStorage.getItem("lang")||"ar";
let theme=localStorage.getItem("theme")||"light";

const g=document.getElementById("gallery");
const popup=document.getElementById("popup");
const popupVideo=document.getElementById("popupVideo");

function render(){
  g.innerHTML="";
  videos.forEach((v,i)=>{
    const c=document.createElement("div");
    c.className="card";

    const vid=document.createElement("video");
    vid.src=v;
    vid.muted=true;
    vid.onclick=()=>{
      popupVideo.src=v;
      popup.style.display="grid";
      popupVideo.play();
    };

    const key="vcom-"+i;
    const comments=JSON.parse(localStorage.getItem(key)||"[]");

    const com=document.createElement("div");
    com.className="comment";
    com.innerHTML=`
      <textarea id="t${i}" placeholder="${txt[lang].ph}"></textarea>
      <button onclick="add(${i})">${txt[lang].send}</button>
      <ul>${comments.map(c=>`<li>${c}</li>`).join("")}</ul>
    `;

    c.append(vid,com);
    g.appendChild(c);
  });
}

window.add=function(i){
  const t=document.getElementById("t"+i);
  if(!t.value.trim())return;
  const key="vcom-"+i;
  const arr=JSON.parse(localStorage.getItem(key)||"[]");
  arr.push(t.value);
  localStorage.setItem(key,JSON.stringify(arr));
  render();
};

popup.onclick=()=>{
  popupVideo.pause();
  popup.style.display="none";
};

document.getElementById("langBtn").onclick=()=>{
  lang=lang==="ar"?"fr":"ar";
  localStorage.setItem("lang",lang);
  init();
};

document.getElementById("themeBtn").onclick=()=>{
  theme=theme==="light"?"dark":"light";
  localStorage.setItem("theme",theme);
  document.body.setAttribute("data-theme",theme);
};

function init(){
  document.getElementById("title").textContent=txt[lang].title;
  document.getElementById("backBtn").textContent=txt[lang].back;
  render();
}

document.body.setAttribute("data-theme",theme);
init();
</script>
</body>
</html>
